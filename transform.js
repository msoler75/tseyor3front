const data = {"data":[{"id":1,"attributes":{"nombre":"Ágora del Junantal","descripcion":"Asamblea soberana de Tseyor ","slug":"agora-del-junantal","zonaHoraria":"Espana","createdAt":"2022-04-30T13:06:20.993Z","updatedAt":"2022-05-17T17:18:13.312Z","publishedAt":"2022-04-30T13:06:30.775Z","texto":"Esto es una descripción extendida","publicaciones":{"data":[{"id":3,"attributes":{"titulo":"wqerqewrqewrweer","texto":"qewrqewrewer","tipo":"Notificación","createdAt":"2022-05-08T11:20:41.141Z","updatedAt":"2022-05-08T11:29:37.130Z","publishedAt":"2022-05-08T11:25:52.671Z","visibilidad":null}},{"id":4,"attributes":{"titulo":"otra publi","texto":"ewqrqwerwerwewqrer","tipo":"Orden del día","createdAt":"2022-05-08T11:30:14.273Z","updatedAt":"2022-05-08T11:30:26.446Z","publishedAt":"2022-05-08T11:30:19.809Z","visibilidad":null}},{"id":7,"attributes":{"titulo":"werewrweqrewer","texto":"wwerweweqrer","tipo":"Notificación","createdAt":"2022-05-08T12:51:45.559Z","updatedAt":"2022-05-08T12:52:06.476Z","publishedAt":"2022-05-08T12:52:04.918Z","visibilidad":null}},{"id":8,"attributes":{"titulo":"Od Martes","texto":"weqrewqrrrweqrez\nrqwereqwerer\nererqwerewq\n\n\nwqerqwerewe\nee\nwerqwereqwrewrewrewreeeeerwwwerweweqwereqwwwewewewew","tipo":"Orden del día","createdAt":"2022-05-08T12:52:33.411Z","updatedAt":"2022-05-09T06:30:01.768Z","publishedAt":"2022-05-08T18:11:08.088Z","visibilidad":null}},{"id":10,"attributes":{"titulo":"Orden del dia 4-5-2022","texto":"qewrkewqoprkepoqw kreqwpo rwqerw\nwqe\n rewqr\n qwer\n weq\nr eq\nreqw \nweq\n we\nrewq\n r\nwqeweq\n","tipo":"Acta o Resumen","createdAt":"2022-05-08T19:29:29.010Z","updatedAt":"2022-05-11T17:49:05.568Z","publishedAt":"2022-05-08T19:29:37.862Z","visibilidad":null}},{"id":6,"attributes":{"titulo":"wqerqwerqwe rewqrweqr wer weq weqwe","texto":"qwerq wereqw ewqrqwe rew wer e","tipo":"Anexo","createdAt":"2022-05-08T12:50:41.114Z","updatedAt":"2022-05-11T17:49:53.886Z","publishedAt":"2022-05-08T19:30:17.977Z","visibilidad":null}},{"id":17,"attributes":{"titulo":null,"texto":"hola amores, como va todo?","tipo":"Anuncio","createdAt":"2022-05-11T18:05:10.716Z","updatedAt":"2022-05-11T18:05:10.716Z","publishedAt":"2022-05-11T18:05:10.713Z","visibilidad":null}},{"id":18,"attributes":{"titulo":"anuncio del equipo Ágora del Junantal","texto":"Hola cómo estamos?","tipo":"Anuncio","createdAt":"2022-05-12T09:35:24.557Z","updatedAt":"2022-05-12T09:35:24.557Z","publishedAt":"2022-05-12T09:35:24.555Z","visibilidad":"equipo"}},{"id":21,"attributes":{"titulo":"anuncio del equipo Ágora del Junantal","texto":"weqrwerwqeqewrw","tipo":"Anuncio","createdAt":"2022-05-12T09:50:24.008Z","updatedAt":"2022-05-12T09:50:24.008Z","publishedAt":"2022-05-12T09:50:24.004Z","visibilidad":"equipo"}},{"id":24,"attributes":{"titulo":"anuncio del equipo Ágora del Junantal","texto":"weqrqwerwerewqwewqerwerer qwerwqe","tipo":"Anuncio","createdAt":"2022-05-12T09:54:03.562Z","updatedAt":"2022-05-12T09:54:19.091Z","publishedAt":"2022-05-12T09:54:03.558Z","visibilidad":"equipo"}},{"id":9,"attributes":{"titulo":"Aba Aba Aba Aba Aba  ABa zz","texto":"ABA ABA ABA ABA ABA ABA ABA ABA  qewe r\nwqeew\n e\n q\n  er\n  weq \n  wre\n  \n q\n  er\n  weq \n  wre\n  \n q\n  er\n  weq \n  wre\n  \n q\n  er\n  weq \n  wre\n  \n q\n  er\n  weq \n  wre\n  \n q\n  er\n  weq \n  wre\n  \n q\n  er\n  weq \n  wre\n  \n q\n  er\n  weq \n  wre\n  \n q\n  er\n  weq \n  wre\n  \n q\n  er\n  weq \n  wre\n  \n q\n  er\n  weq \n  wre\n  \n q\n  er\n  weq \n  wre\n  \n q\n  er\n  weq \n  wre\n  ","tipo":"Notificación","createdAt":"2022-05-08T19:03:28.386Z","updatedAt":"2022-05-12T11:18:13.448Z","publishedAt":"2022-05-09T06:29:10.134Z","visibilidad":null}},{"id":25,"attributes":{"titulo":"Explicación de funcionamiento","texto":"Explicación de funcionamiento del ágora del Junantal\n\nAcuerdos:\n\nNormativas:\n\n","tipo":"Información","createdAt":"2022-05-12T12:29:52.149Z","updatedAt":"2022-05-12T12:29:55.161Z","publishedAt":"2022-05-12T12:29:55.148Z","visibilidad":"público"}}]}}},{"id":3,"attributes":{"nombre":"Arte visual","descripcion":"Arte y trabajos de tipo gráfico","slug":"arte-visual","zonaHoraria":null,"createdAt":"2022-05-12T19:44:40.849Z","updatedAt":"2022-05-12T19:44:43.181Z","publishedAt":"2022-05-12T19:44:43.176Z","texto":null,"publicaciones":{"data":[]}}},{"id":4,"attributes":{"nombre":"Cosmética","descripcion":"Belleza e Higiene","slug":"cosmetica","zonaHoraria":"Espana","createdAt":"2022-05-12T19:45:09.266Z","updatedAt":"2022-05-13T16:49:56.697Z","publishedAt":"2022-05-12T19:45:50.276Z","texto":"","publicaciones":{"data":[]}}}],"meta":{"pagination":{"page":1,"pageSize":25,"pageCount":1,"total":3}}}

class transformer {
    
  static transform(data) {
    //console.log('transform', data)
    if (Array.isArray(data)) {
      for (const key in data)
        data[key] = this.transform(data[key])
      return data
    }
    if (data && typeof data == 'object' && 'data' in data && 'meta' in data) {
      //for (const key in data)
        //data[key] = key == 'data' ? this.transform(data[key]) : data[key]
      data.data = this.transform(data.data)
      //console.log('to', data)
      return data
    }
    if (data && typeof data == 'object' && 'attributes' in data) {
      for (const key in data.attributes)
        data[key] = this.transform(data.attributes[key])
      delete data.attributes
    }
    if (data && typeof data == 'object' && 'data' in data) {
      for (const key in data.data)
        data[key] = this.transform(data.data[key])
      delete data.data
    }
    //console.log('to', data)
    return data
  }

}

console.log(transformer.transform(data))
console.log('ended')